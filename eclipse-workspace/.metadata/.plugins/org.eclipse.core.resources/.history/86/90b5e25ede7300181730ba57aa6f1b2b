package service;

import java.io.BufferedReader;
import java.io.InputStreamReader;
import java.net.HttpURLConnection;
import java.net.URL;
import java.text.SimpleDateFormat;
import java.time.LocalDateTime;
import java.time.format.DateTimeFormatter;
import java.util.ArrayList;
import java.util.List;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;

import model.Movie;

@Service
public class ApiService {
	
	/* Naver Open API ฐทร */
	private static final String naver_url = "";
	private static final String naver_key = "";
	
	
	private static final String kobis_url = "http://www.kobis.or.kr/kobisopenapi/webservice/rest/boxoffice/searchDailyBoxOfficeList.json?";
	private static final String kobis_key = "key=430156241533f1d058c603178cc3ca0e";

	LocalDateTime now = LocalDateTime.now();
	LocalDateTime now1 = now.minusDays(1);
	
	
	public String getImgUrl() {
		String imgUrl = "";
		
		
		return imgUrl;
	}
	
	public List<Movie> getMovieInfo() throws Exception{
		
				
		System.out.println("@@@@@@@@");
		BufferedReader br = null;
		List<Movie> list = new ArrayList<Movie>();
		String strUrl = kobis_url + kobis_key + "&targetDt=20180619";
				
		URL url = new URL(strUrl);
		HttpURLConnection urlConnection = (HttpURLConnection) url.openConnection();
		urlConnection.setRequestMethod("GET");
		
		br = new BufferedReader(new InputStreamReader(urlConnection.getInputStream(), "UTF-8"));
		String result = "";
		String line;
		while((line = br.readLine()) != null) {
			result = result + line + "\n";
		}
		System.out.println(result);
		
		return list;
	}
	
	
}
